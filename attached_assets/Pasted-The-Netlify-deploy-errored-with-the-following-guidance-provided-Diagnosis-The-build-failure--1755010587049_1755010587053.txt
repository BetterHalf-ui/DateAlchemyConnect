The Netlify deploy errored, with the following guidance provided:

**Diagnosis:**
The build failure is due to the command `vite` not being found, resulting in an exit code of 127.

**Solution:**
To resolve this issue:
1. **Verify Package Dependency**:
   Ensure that the `vite` package is listed as a dependency in the `package.json` file or has been committed to the repository.
   
2. **Installation of `vite`**:
   If `vite` is not a dependency, you need to add it by running:
   ```bash
   npm install vite --save-dev
   ```
   
3. **Update Build Configuration**:
   Update the build command to correctly reference `vite`. If the build command is executed via npm script, modify the command in the `package.json` file to:
   ```json
   "build": "vite build && esbuild server/index.ts --platform=node --packages=external --bundle --format=esm --outdir=dist"
   ```

By following these steps, the build should be able to find and run the `vite` command successfully.

The relevant error logs are:

Line 9: Preparing Git Reference refs/heads/main
Line 10: Custom publish path detected. Proceeding with the specified path: 'dist/public'
Line 11: Custom functions path detected. Proceeding with the specified path: 'netlify/functions'
Line 12: Starting to install dependencies
Line 13: Started restoring cached python cache
Line 14: Finished restoring cached python cache
Line 15: Started restoring cached ruby cache
Line 16: Finished restoring cached ruby cache
Line 17: Started restoring cached go cache
Line 18: Finished restoring cached go cache
Line 19: Failed during stage 'building site': Build script returned non-zero exit code: 2
Line 20: Started restoring cached Node.js version
Line 21: Finished restoring cached Node.js version
Line 22: v20.19.4 is already installed.
Line 23: Now using node v20.19.4 (npm v10.8.2)
Line 24: Enabling Node.js Corepack
Line 25: Started restoring cached build plugins
Line 26: Finished restoring cached build plugins
Line 27: WARNING: The environment variable 'NODE_ENV' is set to 'production'. Any 'devDependencies' in package.json will not be installed
Line 28: Started restoring cached corepack dependencies
Line 29: Finished restoring cached corepack dependencies
Line 61:   production
Line 62: [96m[1mâ€‹[22m[39m
Line 63: [96m[1mbuild.command from netlify.toml                               [22m[39m
Line 64: [96m[1mâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€[22m[39m
Line 65: â€‹
Line 66: [36m$ npm run build[39m
Line 67: > rest-express@1.0.0 build
Line 68: > vite build && esbuild server/index.ts --platform=node --packages=external --bundle --format=esm --outdir=dist
Line 69: sh: 1: vite: not found
Line 70: [91m[1mâ€‹[22m[39m
Line 71: [91m[1m"build.command" failed                                        [22m[39m
Line 72: [91m[1mâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€[22m[39m
Line 73: â€‹
Line 74:   [31m[1mError message[22m[39m
Line 75:   Command failed with exit code 127: npm run build
Line 76: â€‹
Line 77:   [31m[1mError location[22m[39m
Line 78:   In build.command from netlify.toml:
Line 79:   npm run build
Line 80: â€‹
Line 81:   [31m[1mResolved config[22m[39m
Line 82:   build:
Line 83:     command: npm run build
Line 84:     commandOrigin: config
Line 85:     environment:
Line 86:       - NODE_ENV
Line 87:       - SUPABASE_URL
Line 88:       - NODE_VERSION
Line 89:     publish: /opt/build/repo/dist/public
Line 90:     publishOrigin: config
Line 91:   functionsDirectory: /opt/build/repo/netlify/functions
Line 92:   redirects:
Line 93:     - from: /api/*
      status: 200
      to: /.netlify/functions/api/:splat
    - from: /*
      status: 200
      to: /index.
Line 94: Build failed due to a user error: Build script returned non-zero exit code: 2
Line 95: Failing build: Failed to build site
Line 96: Finished processing build request in 18.403s